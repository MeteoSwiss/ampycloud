<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ampycloud package &mdash; ampycloud  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ampycloud.plots package" href="ampycloud.plots.html" />
    <link rel="prev" title="Modules" href="../modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> ampycloud
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running.html">Using ampycloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters.html">The ampycloud scientific parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledge.html">Acknowledging ampycloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License &amp; Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss/ampycloud/blob/develop/CONTRIBUTING.md">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss/ampycloud">Github repository</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Modules</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ampycloud package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ampycloud.plots.html">ampycloud.plots package</a></li>
<li class="toctree-l4"><a class="reference internal" href="ampycloud.utils.html">ampycloud.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.cluster">ampycloud.cluster module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.core">ampycloud.core module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.data">ampycloud.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.dynamic">ampycloud.dynamic module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.errors">ampycloud.errors module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.layer">ampycloud.layer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.logger">ampycloud.logger module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.scaler">ampycloud.scaler module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.version">ampycloud.version module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ampycloud.wmo">ampycloud.wmo module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doc_todo.html">Documentation todos</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ampycloud</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modules.html">Modules</a> &raquo;</li>
      <li>ampycloud package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/modules/ampycloud.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-ampycloud">
<span id="ampycloud-package"></span><h1>ampycloud package<a class="headerlink" href="#module-ampycloud" title="Permalink to this headline"></a></h1>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: highest-level init magic</p>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ampycloud.plots.html">ampycloud.plots package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#module-ampycloud.plots.core">ampycloud.plots.core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#module-ampycloud.plots.diagnostics">ampycloud.plots.diagnostics module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#module-ampycloud.plots.hardcoded">ampycloud.plots.hardcoded module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#module-ampycloud.plots.secondary">ampycloud.plots.secondary module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.plots.html#module-ampycloud.plots.utils">ampycloud.plots.utils module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ampycloud.utils.html">ampycloud.utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.utils.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.utils.html#module-ampycloud.utils.mocker">ampycloud.utils.mocker module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ampycloud.utils.html#module-ampycloud.utils.performance">ampycloud.utils.performance module</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-ampycloud.cluster">
<span id="ampycloud-cluster-module"></span><h2>ampycloud.cluster module<a class="headerlink" href="#module-ampycloud.cluster" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: clustering tools</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.cluster.agglomerative_cluster">
<span class="sig-prename descclassname"><span class="pre">ampycloud.cluster.</span></span><span class="sig-name descname"><span class="pre">agglomerative_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_clusters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">affinity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'euclidean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linkage</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'single'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#ampycloud.cluster.agglomerative_cluster" title="Permalink to this definition"></a></dt>
<dd><p>Function that wraps arround sklearn.cluster.AgglomerativeClustering.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – array of [x, y] pairs to run the clustering on.</p></li>
<li><p><strong>n_clusters</strong> (<em>int, optional</em>) – see sklearn.cluster.AgglomerativeClustering for details.
Defaults to None.</p></li>
<li><p><strong>affinity</strong> (<em>str, optional</em>) – see sklearn.cluster.AgglomerativeClustering for details.
Defaults to ‘euclidian’.</p></li>
<li><p><strong>linkage</strong> (<em>str, optional</em>) – see sklearn.cluster.AgglomerativeClustering for details.
Defaults to ‘single’.</p></li>
<li><p><strong>distance_threshold</strong> (<em>int|float, optional</em>) – see sklearn.cluster.AgglomerativeClustering for
details. Defaults to 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int, ndarray</em> – number of clusters found, and corresponding clustering labels for each data
point.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.cluster.clusterize">
<span class="sig-prename descclassname"><span class="pre">ampycloud.cluster.</span></span><span class="sig-name descname"><span class="pre">clusterize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#ampycloud.cluster.clusterize" title="Permalink to this definition"></a></dt>
<dd><p>Umbrella clustering routine, that provides a single access point to the different clustering
algorithms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – array of [x, y] arrays to clusterize.</p></li>
<li><p><strong>algo</strong> (<em>str, optional</em>) – clustering algorithm, that must be one of [None, ‘agglomerative’].
Defaults to None.</p></li>
<li><p><strong>kwargs</strong> (<em>dict, optional</em>) – keyword arguments to be fed to the underlying clustering function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int, ndarray</em> – the number of clusters identified, and the associated labels for each data
point.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ampycloud.core">
<span id="ampycloud-core-module"></span><h2>ampycloud.core module<a class="headerlink" href="#module-ampycloud.core" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the BSD-3-Clause license.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: core ampycloud routines. All fcts meant to be used by users directly are here.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.copy_prm_file">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">copy_prm_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'./'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'defaults'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.core.copy_prm_file" title="Permalink to this definition"></a></dt>
<dd><p>Save a local copy of a specific ampycloud parameter file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_loc</strong> (<em>str, optional</em>) – location to save the YML file to. Defaults to ‘./’.</p></li>
<li><p><strong>which</strong> (<em>str, optional</em>) – name of thee parameter file to copy. Defaults to ‘defaults’.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="n">ampycloud</span><span class="o">.</span><span class="n">copy_prm_file</span><span class="p">(</span><span class="n">save_loc</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is also a high-level entry point that allows users to get a local copy of the
ampycloud parameter files directly from the command line:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ampycloud_copy_prm_file</span> <span class="o">-</span><span class="n">which</span><span class="o">=</span><span class="n">default</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.set_prms">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">set_prms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.core.set_prms" title="Permalink to this definition"></a></dt>
<dd><p>Sets the dynamic=scientific ampycloud parameters from a suitable YAML file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>pth</strong> (<em>str|Path</em>) – path to a YAML parameter file for ampycloud.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to first get a copy of the default ampycloud parameter file using
<code class="docutils literal notranslate"><span class="pre">ampycloud.copy_prm_file()</span></code>, and edit its content as required.</p>
<p>Doing so should ensure full compliance with default structure of <code class="docutils literal notranslate"><span class="pre">dynamic.AMPYCLOUD_PRMS</span></code>.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="n">ampycloud</span><span class="o">.</span><span class="n">copy_prm_file</span><span class="p">(</span><span class="n">save_loc</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
<span class="n">ampycloud</span><span class="o">.</span><span class="n">set_prms</span><span class="p">(</span><span class="s1">&#39;./ampycloud_default_prms.yml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.reset_prms">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">reset_prms</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.core.reset_prms" title="Permalink to this definition"></a></dt>
<dd><p>Reset the ampycloud dynamic=scientific parameters to their default values.</p>
<p class="rubric">Example</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="kn">from</span> <span class="nn">ampycloud</span> <span class="kn">import</span> <span class="n">dynamic</span>

<span class="c1"># Change a parameter</span>
<span class="n">dynamic</span><span class="o">.</span><span class="n">AMPYCLOUD_PRMS</span><span class="o">.</span><span class="n">OKTA_LIM8</span> <span class="o">=</span> <span class="mi">95</span>
<span class="c1"># Reset them</span>
<span class="n">ampycloud</span><span class="o">.</span><span class="n">reset_prms</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Back to the default value:&#39;</span><span class="p">,</span> <span class="n">dynamic</span><span class="o">.</span><span class="n">AMPYCLOUD_PRMS</span><span class="o">.</span><span class="n">OKTA_LIM8</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.run">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geoloc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#ampycloud.data.CeiloChunk" title="ampycloud.data.CeiloChunk"><span class="pre">ampycloud.data.CeiloChunk</span></a></span></span><a class="headerlink" href="#ampycloud.core.run" title="Permalink to this definition"></a></dt>
<dd><p>Run the ampycloud algorithm on a given dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – the data to be processed, as a pandas DataFrame.</p></li>
<li><p><strong>geoloc</strong> (<em>str, optional</em>) – the name of the geographic location where the data was taken.
Defaults to None.</p></li>
<li><p><strong>ref_dt</strong> (<em>str, optional</em>) – reference date and time of the observations, corresponding to
Delta t = 0. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>CeiloChunk</em> – the data chunk with all the processing outcome bundled cleanly.</p>
</dd>
</dl>
<p>All that is required to run ampycloud is said (properly formatted) dataset. At the moment,
specifying <code class="docutils literal notranslate"><span class="pre">geoloc</span></code> and <code class="docutils literal notranslate"><span class="pre">ref_dt</span></code> serves no purpose other than to enhance plots (should they be
created) at the moment.</p>
<p>The input <code class="docutils literal notranslate"><span class="pre">data</span></code> must be a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> with the following column names (types):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;ceilo&#39;</span> <span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;dt&#39;</span> <span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;alt&#39;</span> <span class="p">(</span><span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;type&#39;</span> <span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ceilo</span></code> columns contains the names/ids of the ceilometers as <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">dt</span></code> column contains time deltas, in s, between a given ceilometer observation and
<code class="docutils literal notranslate"><span class="pre">ref_dt</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">alt</span></code> column contains the cloud base hit altitudes reported by the ceilometers, in ft
above ground.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">type</span></code> column contains integer that are the hit sequence number, if a given ceilometer
is reporting multiple hits for a given timestep, or <code class="docutils literal notranslate"><span class="pre">-1</span></code> if the hit corresponds to a
vertical visibility observations.</p>
<p>It is possible to obtain an example of the format from the
<code class="docutils literal notranslate"><span class="pre">ampycloud.utils.mocker.canonical_demo_dataset()</span></code> routine of the package, namely:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ampycloud.utils</span> <span class="kn">import</span> <span class="n">mocker</span>
<span class="n">mock_data</span> <span class="o">=</span> <span class="n">mocker</span><span class="o">.</span><span class="n">canonical_demo_dataset</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>ampycloud treats vertical visibility hits just like any other hit. Hence, it is up to the
user to adjust the vertical visibility hit altitude (if they so desire), and/or ignore
some of them (if they so desire) prior to feeding them to ampycloud.</p>
</div>
<p>All the scientific parameters are set dynamically in ampycloud.dynamic. From within
a Python session all these parameters can be changed directly. For example,
to change the plotting style to ‘latex’, one would do:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ampycloud</span> <span class="kn">import</span> <span class="n">dynamic</span>
<span class="n">dynamic</span><span class="o">.</span><span class="n">AMPYCLOUD_PRMS</span><span class="o">.</span><span class="n">MPL_STYLE</span> <span class="o">=</span> <span class="s1">&#39;latex&#39;</span>
</pre></div>
</div>
<p>Alternatively, all the scientific parameters can also be defined and fed to ampycloud via a YML
file. See <code class="docutils literal notranslate"><span class="pre">ampycloud.set_prms()</span></code> for details.</p>
<p class="rubric">Example</p>
<p>In the following example, we create the canonical mock dataset from ampycloud, and run
the algorithm on it:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="kn">from</span> <span class="nn">ampycloud.utils</span> <span class="kn">import</span> <span class="n">mocker</span>

<span class="c1"># Generate the canonical demo dataset for ampycloud</span>
<span class="n">mock_data</span> <span class="o">=</span> <span class="n">mocker</span><span class="o">.</span><span class="n">canonical_demo_data</span><span class="p">()</span>

<span class="c1"># Run the ampycloud algorithm on it</span>
<span class="n">chunk</span> <span class="o">=</span> <span class="n">ampycloud</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">mock_data</span><span class="p">,</span> <span class="n">geoloc</span><span class="o">=</span><span class="s1">&#39;Mock data&#39;</span><span class="p">,</span> <span class="n">ref_dt</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c1"># Get the resulting METAR/SYNOP message</span>
<span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">metar_msg</span><span class="p">(</span><span class="n">synop</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.synop">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">synop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.core.synop" title="Permalink to this definition"></a></dt>
<dd><p>Runs the ampycloud algorithm on a dataset and extract a synop report of the cloud layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pd.DataFrame</em>) – the data to be processed, as a pandas DataFrame.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – the synop message.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="kn">from</span> <span class="nn">ampycloud.utils</span> <span class="kn">import</span> <span class="n">mocker</span>

<span class="c1"># Generate the canonical demo dataset for ampycloud</span>
<span class="n">mock_data</span> <span class="o">=</span> <span class="n">mocker</span><span class="o">.</span><span class="n">canonical_demo_data</span><span class="p">()</span>

<span class="c1"># Compute the synop message</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">ampycloud</span><span class="o">.</span><span class="n">synop</span><span class="p">(</span><span class="n">mock_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.metar">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">metar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msa</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.core.metar" title="Permalink to this definition"></a></dt>
<dd><p>Run the ampycloud algorithm on a dataset and extract a METAR report of the cloud layers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – the data to be processed, as a pandas DataFrame.</p></li>
<li><p><strong>msa</strong> (<em>int|float, optional</em>) – Minimum Sector Altitude. If set, layers above it will not be
reported. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – the metar message.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ampycloud</span>
<span class="kn">from</span> <span class="nn">ampycloud.utils</span> <span class="kn">import</span> <span class="n">mocker</span>

<span class="c1"># Generate the canonical demo dataset for ampycloud</span>
<span class="n">mock_data</span> <span class="o">=</span> <span class="n">mocker</span><span class="o">.</span><span class="n">canonical_demo_data</span><span class="p">()</span>

<span class="c1"># Compute the METAR message, with Minimnum Sector Altitude of 10&#39;000 ft</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">ampycloud</span><span class="o">.</span><span class="n">metar</span><span class="p">(</span><span class="n">mock_data</span><span class="p">,</span> <span class="n">msa</span><span class="o">=</span><span class="mf">1e5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.core.demo">
<span class="sig-prename descclassname"><span class="pre">ampycloud.core.</span></span><span class="sig-name descname"><span class="pre">demo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#ampycloud.core.demo" title="Permalink to this definition"></a></dt>
<dd><p>Run the ampycloud algorithm on a demonstration dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>pd.DataFrame, CeiloChunk</em> – the mock dataset used for the demonstration, and the CeiloChunk
instance.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ampycloud.data">
<span id="ampycloud-data-module"></span><h2>ampycloud.data module<a class="headerlink" href="#module-ampycloud.data" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: data classes</p>
<dl class="py class">
<dt class="sig sig-object py" id="ampycloud.data.AbstractChunk">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampycloud.data.</span></span><span class="sig-name descname"><span class="pre">AbstractChunk</span></span><a class="headerlink" href="#ampycloud.data.AbstractChunk" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Abstract parent class for data chunk classes.</p>
<p>For now, this class is fairly small, because it has only one child that contains many more
methods. If there are ever more than Ceilometer data used by this algorithm, it might make
sense to revisit the distribution of methods between child and parent classes. Or not.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.AbstractChunk.__init__">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.AbstractChunk.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Init routine for abstract class.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.AbstractChunk.geoloc">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geoloc</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#ampycloud.data.AbstractChunk.geoloc" title="Permalink to this definition"></a></dt>
<dd><p>The name of the geographic location of the observations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.AbstractChunk.ref_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ref_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#ampycloud.data.AbstractChunk.ref_dt" title="Permalink to this definition"></a></dt>
<dd><p>The reference date and time for the data, i.e. Delta t = 0.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.AbstractChunk.data">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.core.frame.DataFrame</span></em><a class="headerlink" href="#ampycloud.data.AbstractChunk.data" title="Permalink to this definition"></a></dt>
<dd><p>The data of the chunk, as a pandas DataFrame.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampycloud.data.</span></span><span class="sig-name descname"><span class="pre">CeiloChunk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geoloc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ampycloud.data.CeiloChunk" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#ampycloud.data.AbstractChunk" title="ampycloud.data.AbstractChunk"><code class="xref py py-class docutils literal notranslate"><span class="pre">ampycloud.data.AbstractChunk</span></code></a></p>
<p>Child class for timeseries of Ceilometers hits, referred to as data ‘chunks’.</p>
<p>This class essentially gathers all the data and processing methods under one roof.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some of these methods are actually intended to be used in order … Some safety mechanisms
have been put in place to ensure this actually happens, but still …</p>
<p>You’ve been warned.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geoloc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref_dt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.__init__" title="Permalink to this definition"></a></dt>
<dd><p>CeiloChunk init method.</p>
<p>The input data is required to be a pandas DataFrame with 4 columns:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;ceilo&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="s1">&#39;alt&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Specifically:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ceilo</span></code>: contains names/ids of the ceilometer associated to the measurements,
<strong>as str</strong>. This is important to derive correct sky coverage percentage when combining
data from more than 1 ceilometer, in case ceilometers report multiple hits at the
same time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dt</span></code>: time delta between the (planned) METAR issuances time and the
hit time in s, <strong>as float</strong>. This should typically be a negative number (because
METARs are assembled using <em>existing=past</em> ceilometer observations).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt</span></code>: cloud base hit altitude in ft, <strong>as float</strong>. The cloud base altitude computed
by the ceilometer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: cloud hit type, <strong>as int</strong>. A value n&gt;0 indicates that the hit is the n-th
(from the ground) that was reported by this specific ceilometer for this specific
timestep. A value of n=-1 indicates that the cloud hit corresponds to a Vertical
Visibility hit.</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – the input data. See above for details.</p></li>
<li><p><strong>geoloc</strong> (<em>str, optional</em>) – name of the geolocation of the observations.</p></li>
<li><p><strong>ref_dt</strong> (<em>str, optional</em>) – reference date and time of the observations, corresponding to
Delta t = 0. Defaults to None.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For now, geoloc and ref_dt serve no purposes other than improving the diagnostic plots.
This is also why ref_dt is a str, such that users can specify it however they please.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.data_rescaled">
<span class="sig-name descname"><span class="pre">data_rescaled</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.core.frame.DataFrame</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.data_rescaled" title="Permalink to this definition"></a></dt>
<dd><p>Returns a copy of the data, rescaled according to the provided parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt_mode</strong> (<em>str, optional</em>) – scaling rule for the time deltas. Defaults to None.</p></li>
<li><p><strong>alt_mode</strong> (<em>str, optional</em>) – scaling rule for the altitudes. Defaults to None.</p></li>
<li><p><strong>dt_kwargs</strong> (<em>dict, optional</em>) – dict of arguments to be fed to the chosen dt scaling
routine. Defaults to None.</p></li>
<li><p><strong>alt_kwargs</strong> (<em>dict, optinal</em>) – dict of arguments to be fed to the chosen alt scaling
routine. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>pd.DataFrame</em> – a copy of the data, rescaled.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The kwargs approach was inspired by the reply from Jonathan Eunice on
<a class="reference external" href="https://stackoverflow.com/questions/26534134">SO</a>.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.ceilos">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ceilos</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.ceilos" title="Permalink to this definition"></a></dt>
<dd><p>The list of all ceilometers included in the data chunk.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>list of str</em> – the list of ceilo names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.max_hits_per_layer">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_hits_per_layer</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.max_hits_per_layer" title="Permalink to this definition"></a></dt>
<dd><p>The maximum number of ceilometer hits possible for a given layer, given the chunk data.</p>
<p>This is the total number of <strong>unique</strong> timesteps from all ceilometers considered.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This value assumes that a layer can contain only 1 hit per ceilometer per timestep,
i.e. 2 simultaneous hits from a given ceilometer can <strong>never</strong> belong to the same cloud
layer.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>int</em> – the max number of ceilometer hit for a layer. Divide by len(self.ceilos) to get
the <strong>average</strong> max number of hits per ceilometer per layer (remember: not all
ceilometers may have the same number of timestamps over the chunk time period !).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.metarize">
<span class="sig-name descname"><span class="pre">metarize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'slices'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_frac</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lim0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lim8</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">98</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.metarize" title="Permalink to this definition"></a></dt>
<dd><p>Assembles a dataframe of slice/group/layer METAR properties of interest, including:
number of hits, sky coverage percentage, okta count, base altitude, mean altitude, altitude
standard deviation, METAR code, significance, …</p>
<p>These properties get stored in a self._slices, self._groups, or self._layers class
attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>which</strong> (<em>str, optional</em>) – whether to process ‘slices’, ‘groups’, or ‘layers’.
Defaults to ‘slices’.</p></li>
<li><p><strong>base_frac</strong> (<em>float, optional</em>) – number of the smallest slice/group/layer elements to
consider when deriving the slice/group/layer altitude (as a median), expressed as a
fraction (0&lt;=base_frac&lt;=1) of the slice/cluster/layer total hit counts.
Defaults to 0.1.</p></li>
<li><p><strong>lim0</strong> (<em>int|float, optional</em>) – upper limit of the sky coverage percentagte for the 0 okta
bin, in %. Defaults to 2.</p></li>
<li><p><strong>lim8</strong> (<em>int|float, optional</em>) – lower limit of the sky coverage percentage for the 8 okta
bin, in %. Defaults to 98.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.find_slices">
<span class="sig-name descname"><span class="pre">find_slices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.find_slices" title="Permalink to this definition"></a></dt>
<dd><p>Identify general altitude slices in the chunk data. Intended as the first stage towards
the identification of cloud layers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The “parameters” of this function are defined in AMPYCLOUD_PRMS.SLICING_PRMS in the
dynamic.py module.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.find_groups">
<span class="sig-name descname"><span class="pre">find_groups</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.find_groups" title="Permalink to this definition"></a></dt>
<dd><p>Identifies groups of coherent hits accross overlapping slices. Intended as the second
stage towards the identification of cloud layers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The “parameters” of this function are defined in AMPYCLOUD_PRMS.GROUPING_PRMS in the
dynamic.py module.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.find_layers">
<span class="sig-name descname"><span class="pre">find_layers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.find_layers" title="Permalink to this definition"></a></dt>
<dd><p>Identifies individual layers from a list of groups, splitting these in 2 or 3
(if warrented) <em>significant</em> cloud sub-layers. Intended as the third stage towards the
identification of cloud layers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The “parameters” of this function are defined in AMPYCLOUD_PRMS.LAYERING_RPMS in the
dynamic.py module.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.n_slices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_slices</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.n_slices" title="Permalink to this definition"></a></dt>
<dd><p>Returns the number of slices identified in the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>int</em> – the number of slices</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.slices">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">slices</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.core.frame.DataFrame</span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.slices" title="Permalink to this definition"></a></dt>
<dd><p>Returns a pandas DataFrame with information regarding the different slices identified
by the slicing step.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.n_groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_groups</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.n_groups" title="Permalink to this definition"></a></dt>
<dd><p>Returns the number of groups identified in the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>int</em> – the number of groups</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.groups">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">groups</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.core.frame.DataFrame</span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.groups" title="Permalink to this definition"></a></dt>
<dd><p>Returns a pandas DataFrame with information regarding the different groups identified
by the grouping algorithm.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.n_layers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_layers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.n_layers" title="Permalink to this definition"></a></dt>
<dd><p>Returns the nnumber of layers identified in the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>int</em> – the number of layers.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.layers">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">layers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.core.frame.DataFrame</span></em><a class="headerlink" href="#ampycloud.data.CeiloChunk.layers" title="Permalink to this definition"></a></dt>
<dd><p>Returns a pandas DataFrame with information regarding the different layers identified
by the layering algorithm.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ampycloud.data.CeiloChunk.metar_msg">
<span class="sig-name descname"><span class="pre">metar_msg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synop</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">msa</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'layers'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.data.CeiloChunk.metar_msg" title="Permalink to this definition"></a></dt>
<dd><p>Construct a METAR-like message for the identified cloud slices, groups, or layers.</p>
<p>The WMO’s cloud layer selection rules applicable to METARs will be applied, unless
synop = True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synop</strong> (<em>bool optional</em>) – if True, all cloud layers will be reported. Else, the WMO’s
cloud layer selection rules applicable to METARs will be applied.</p></li>
<li><p><strong>msa</strong> (<em>int|float, optional</em>) – Minimum Sector Altitude. If set, layers above it will not be
reported. Defaults to None.</p></li>
<li><p><strong>which</strong> (<em>str, optional</em>) – whether to look at ‘slices’, ‘groups’, or ‘layers’. Defaults to
‘layers’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – the METAR-like message.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-ampycloud.dynamic">
<span id="ampycloud-dynamic-module"></span><h2>ampycloud.dynamic module<a class="headerlink" href="#module-ampycloud.dynamic" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: dynamic (scientific) parameters, which can be altered during execution.</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.dynamic.get_default_prms">
<span class="sig-prename descclassname"><span class="pre">ampycloud.dynamic.</span></span><span class="sig-name descname"><span class="pre">get_default_prms</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">yaconfigobject.Config</span></span></span><a class="headerlink" href="#ampycloud.dynamic.get_default_prms" title="Permalink to this definition"></a></dt>
<dd><p>Extract the default ampycloud parameters from the YAML configuration file.</p>
</dd></dl>

</section>
<section id="module-ampycloud.errors">
<span id="ampycloud-errors-module"></span><h2>ampycloud.errors module<a class="headerlink" href="#module-ampycloud.errors" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: custom error and warning classes</p>
<dl class="py exception">
<dt class="sig sig-object py" id="ampycloud.errors.AmpycloudError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampycloud.errors.</span></span><span class="sig-name descname"><span class="pre">AmpycloudError</span></span><a class="headerlink" href="#ampycloud.errors.AmpycloudError" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>The default error class for ampycloud, which is a child of the <cite>Exception</cite> class.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ampycloud.errors.AmpycloudWarning">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ampycloud.errors.</span></span><span class="sig-name descname"><span class="pre">AmpycloudWarning</span></span><a class="headerlink" href="#ampycloud.errors.AmpycloudWarning" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Warning</span></code></p>
<p>The default warning class for ampycloud, which is a child of the <cite>Warning</cite> class.</p>
</dd></dl>

</section>
<section id="module-ampycloud.layer">
<span id="ampycloud-layer-module"></span><h2>ampycloud.layer module<a class="headerlink" href="#module-ampycloud.layer" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-CLause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: layering tools</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.layer.scores2nrl">
<span class="sig-prename descclassname"><span class="pre">ampycloud.layer.</span></span><span class="sig-name descname"><span class="pre">scores2nrl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.layer.scores2nrl" title="Permalink to this definition"></a></dt>
<dd><p>Converts AIC or BIC scores into probabilities = normalized relative likelihood.</p>
<p>Specifically, this function computes:</p>
<div class="math notranslate nohighlight">
\[p_i = \frac{e^{-0.5(\textrm{abics}_i-min(\textrm{abics}))}}{\sum_{i}e^{-0.5(\textrm{abics}_i-min(\textrm{abics}))}}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The smaller the BIC/AIC scores, the better, but the higher the probabilities = normalized
relative likelihood, the better !</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>abics</strong> (<em>ndarray</em>) – scores.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray</em> – probabilities of the different models.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.layer.best_gmm">
<span class="sig-prename descclassname"><span class="pre">ampycloud.layer.</span></span><span class="sig-name descname"><span class="pre">best_gmm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'delta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_prob</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_mul_gain</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#ampycloud.layer.best_gmm" title="Permalink to this definition"></a></dt>
<dd><p>Identify which Gaussian Mixture Model is most appropriate given AIC or BIC scores.</p>
<p>Model selection can be based on:</p>
<blockquote>
<div><p>1. the normalized relative likelihood values (see <cite>scores2nrl()</cite>) of the AIC or/and BIC
scores, or
2. the normalized absolute offsets between the AIC or BIC scores.</p>
</div></blockquote>
<p>The mode defaults to ‘delta’, i.e. the normalized absolute offsets between the scores scores.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The order of the scores <strong>does matter</strong> for this routine.</p>
<p>Starting with the first model as the “current best model”, the model n will become the
“current best model” if:</p>
<ul>
<li><p><cite>mode=’prob’</cite>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">prob</span><span class="p">(</span><span class="n">abics</span><span class="p">[</span><span class="n">current_best_model</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">min_prob</span>
<span class="n">AND</span>
<span class="n">prob</span><span class="p">(</span><span class="n">abics</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">prob</span><span class="p">(</span><span class="n">abics</span><span class="p">[</span><span class="n">current_best_model</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p><cite>mode=’delta’</cite>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">abics</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">delta_mul_gain</span> <span class="o">*</span> <span class="n">abics</span><span class="p">[</span><span class="n">current_best_model</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ul>
<p>The default arguments of this function lead to selecting the number of components with the
smallest score.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abics</strong> (<em>ndarray</em>) – the AICs or BICs scores, ordered from simplest to most complex model.</p></li>
<li><p><strong>mode</strong> (<em>str, optional</em>) – one of [‘delta’, ‘prob’]. Defaults to ‘delta’.</p></li>
<li><p><strong>min_prob</strong> (<em>float, optional</em>) – minimum model probability computed from the scores’s relative
likelihood, below which the other models will be considered. Set it to 1 to select
the model with the lowest score, irrespective of its probability. Defaults to 1.
This has no effect unless mode=’prob’.</p></li>
<li><p><strong>delta_mul_gain</strong> (<em>float, optional</em>) – a smaller score will only be considered “valid”
if it is smaller than delta_mul_gain*current_best_score. Defaults to 1.
This has no effect unless mode=’delta’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int</em> – index of the “most appropriate” model.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.layer.ncomp_from_gmm">
<span class="sig-prename descclassname"><span class="pre">ampycloud.layer.</span></span><span class="sig-name descname"><span class="pre">ncomp_from_gmm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scores</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'BIC'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale_0_to_x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#ampycloud.layer.ncomp_from_gmm" title="Permalink to this definition"></a></dt>
<dd><p>Runs a Gaussian Mixture Model on 1-D data, to determine if it contains 1, 2, or 3
components.</p>
<p>The default values lead to selecting the number of components with the smallest BIC values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>ndarray</em>) – the data to process. If ndarray is 1-D, it will be reshaped to 2-D via
.reshape(-1, 1).</p></li>
<li><p><strong>scores</strong> (<em>str, optional</em>) – either ‘BIC’ or ‘AIC’, to use Baysian Information Criterion or
Akaike Information criterion scores.</p></li>
<li><p><strong>rescale_0_to_x</strong> (<em>float, optional</em>) – if set, vals will be rescaled between 0 and this value.
Defaults to None = no rescaling.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict, optional</em>) – these will be fed to <cite>best_gmm()</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>int, ndarray, ndarray</em> – number of (likely) components, array of component ids to which
each hit most likely belongs, array of AIC/BIC scores.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function was inspired from the “1-D Gaussian Mixture Model” example from astroML:
<a class="reference external" href="https://www.astroml.org/book_figures/chapter4/fig_GMM_1D.html">https://www.astroml.org/book_figures/chapter4/fig_GMM_1D.html</a></p>
</div>
</dd></dl>

</section>
<section id="module-ampycloud.logger">
<span id="ampycloud-logger-module"></span><h2>ampycloud.logger module<a class="headerlink" href="#module-ampycloud.logger" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: logging utilities</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.logger.log_func_call">
<span class="sig-prename descclassname"><span class="pre">ampycloud.logger.</span></span><span class="sig-name descname"><span class="pre">log_func_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">logging.Logger</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="headerlink" href="#ampycloud.logger.log_func_call" title="Permalink to this definition"></a></dt>
<dd><p>Intended as a decorator to log function calls.</p>
<p>The first part of the message containing the function name is at the ‘INFO’ level.
The second part of the message containing the argument values is at the ‘DEBUG’ level.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>logger</strong> (<em>logging.Logger</em>) – a logger to feed info to.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Adapted from the similar dvas function, which itself was adapted from
<a class="reference external" href="https://stackoverflow.com/questions/218616">this post</a> on SO,
in particular the reply from Kfir Eisner and Peter Mortensen.
See also <a class="reference external" href="https://docs.python.org/3/library/inspect.html#inspect.BoundArguments">this</a>.</p>
</div>
</dd></dl>

</section>
<section id="module-ampycloud.scaler">
<span id="ampycloud-scaler-module"></span><h2>ampycloud.scaler module<a class="headerlink" href="#module-ampycloud.scaler" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: data scaling tools</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.scaler.const_scaling">
<span class="sig-prename descclassname"><span class="pre">ampycloud.scaler.</span></span><span class="sig-name descname"><span class="pre">const_scaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'scale'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.scaler.const_scaling" title="Permalink to this definition"></a></dt>
<dd><p>Scale (or descale) values by a constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>ndarray</em>) – values to (de-)scale.</p></li>
<li><p><strong>scale</strong> (<em>int|float</em>) – the scaling value.</p></li>
<li><p><strong>mode</strong> (<em>str, optional</em>) – whether to ‘scale’ or ‘descale’, i.e. undo the scaling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray</em> – vals/scale if mode==’scale’, and val * scale if mode==’descale’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.scaler.minmax_scaling">
<span class="sig-prename descclassname"><span class="pre">ampycloud.scaler.</span></span><span class="sig-name descname"><span class="pre">minmax_scaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'scale'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.scaler.minmax_scaling" title="Permalink to this definition"></a></dt>
<dd><p>Rescale the data onto a [0, 1] interval, possibly using a minimum interval range.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Descaling with this function is a little bit annoying, because the data itself does not
contain enough information to know what interval vals should be mapped onto.
Hence the min_val and max_val kwargs, so that the user can tell us …</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>ndarray</em>) – values to (de-)scale.</p></li>
<li><p><strong>min_range</strong> (<em>int|float, optional</em>) – will map the [0, 1] interval to
[val_mid-min_range/2, val_mid+min_range/2] rather than [val_min, val_max],
if val_max-val_min &lt; min_range. Note: val_mid=(val_max+val_min)/2.</p></li>
<li><p><strong>mode</strong> (<em>str, optional</em>) – whether to ‘scale’ or ‘descale’, i.e. undo the scaling.</p></li>
<li><p><strong>min_val</strong> (<em>int|float, optional</em>) – min (target) interval value, in case mode=’descale’.
Defaults to None.</p></li>
<li><p><strong>max_val</strong> (<em>int|float, optional</em>) – max (target) interval value, in case mode=’descale’.
Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray</em> – scaled/descaled values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.scaler.step_scaling">
<span class="sig-prename descclassname"><span class="pre">ampycloud.scaler.</span></span><span class="sig-name descname"><span class="pre">step_scaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scales</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'scale'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.scaler.step_scaling" title="Permalink to this definition"></a></dt>
<dd><p>Scales values step-wise, with different constants bewteen specific steps.</p>
<p>Values are divided by scales[i] between steps[i-1:i].
Anything outside the range of steps is divided by scales[0] or scale[-1].</p>
<p>Note that this function ensures that each step is properly offseted to ensure that the
scaled data is continuous (no gaps and no overlapping steps) !</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>ndarray</em>) – values to scale.</p></li>
<li><p><strong>steps</strong> (<em>list, optional</em>) – the step <strong>edges</strong>. E.g. [8000, 14000].</p></li>
<li><p><strong>scales</strong> (<em>list, optional</em>) – the scaling values (=dividers) for each step.
E.g. [100, 500, 1000]. Must have len(scales) = len(steps)+1.</p></li>
<li><p><strong>mode</strong> (<em>str, optional</em>) – whether to ‘scale’ or ‘descale’, i.e. undo the scaling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray</em> – (de-)scaled values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.scaler.scaling">
<span class="sig-prename descclassname"><span class="pre">ampycloud.scaler.</span></span><span class="sig-name descname"><span class="pre">scaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.scaler.scaling" title="Permalink to this definition"></a></dt>
<dd><p>Umbrella scaling routine, that gathers all the individual ones under a single entry point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>ndarray</em>) – values to scale.</p></li>
<li><p><strong>fct</strong> (<em>str, optional</em>) – name of the scaling function to use. Can be one of
[‘const’, ‘minmax’, or ‘step’]. Defaults to None =  do nothing.</p></li>
<li><p><strong>**kwargs</strong> – keyword arguments that will be fed to the underlying scaling function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray</em> – the scaled values.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-ampycloud.version">
<span id="ampycloud-version-module"></span><h2>ampycloud.version module<a class="headerlink" href="#module-ampycloud.version" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: ampycloud version</p>
</section>
<section id="module-ampycloud.wmo">
<span id="ampycloud-wmo-module"></span><h2>ampycloud.wmo module<a class="headerlink" href="#module-ampycloud.wmo" title="Permalink to this headline"></a></h2>
<p>Copyright (c) 2021 MeteoSwiss, contributors listed in AUTHORS.</p>
<p>Distributed under the terms of the 3-Clause BSD License.</p>
<p>SPDX-License-Identifier: BSD-3-Clause</p>
<p>Module contains: wmo-related utilities</p>
<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.wmo.perc2okta">
<span class="sig-prename descclassname"><span class="pre">ampycloud.wmo.</span></span><span class="sig-name descname"><span class="pre">perc2okta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lim0</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lim8</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#ampycloud.wmo.perc2okta" title="Permalink to this definition"></a></dt>
<dd><p>Converts a sky coverage percentage into oktas.</p>
<p>One okta corresponds to 1/8 of the sky covered by clouds. The cases of 0 and 8 oktas are
special, in that these indicate that the sky is covered at <em>exactly</em> 0%, respectively 100%.
This implies that the 1 okta and 7 okta bins are larger than others.</p>
<p>This function allows to tweak the 0 and 8 oktas limits via the <cite>lim0</cite> and <cite>lim8</cite> keyword
arguments, such that:</p>
<blockquote>
<div><ul class="simple">
<li><p>0 okta  == 0 &lt;= val &lt;= lim0</p></li>
<li><p>1 okta  == lim0 &lt; val &lt;= 1.5*100/8</p></li>
<li><p>2 oktas == 1.5*100/8 &lt; val &lt;= 2.5*100/8</p></li>
<li><p>…</p></li>
<li><p>7 oktas == 6.5*100/8 &lt; val &lt; lim8</p></li>
<li><p>8 oktas == lim8 &lt;= val &lt;= 100</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>int|float|ndarray</em>) – the sky coverage percentage to convert, in percent.</p></li>
<li><p><strong>lim0</strong> (<em>int|float, optional</em>) – the upper limit for the 0 okta bin, in percent.
Defaults to 0.</p></li>
<li><p><strong>lim8</strong> (<em>int|float, optional</em>) – the lower limit for the 8 oktas bin, in percent.
Defaults to 100.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ndarray of int</em> – the okta value(s).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.wmo.okta2code">
<span class="sig-prename descclassname"><span class="pre">ampycloud.wmo.</span></span><span class="sig-name descname"><span class="pre">okta2code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.wmo.okta2code" title="Permalink to this definition"></a></dt>
<dd><p>Convert an okta value to a METAR code.</p>
<p>Conversion is as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>0 okta =&gt; NCD</p></li>
<li><p>1-2 oktas =&gt; FEW</p></li>
<li><p>3-4 oktas =&gt; SCT</p></li>
<li><p>5-7 oktas =&gt; BKN</p></li>
<li><p>8 oktas =&gt; OVC</p></li>
<li><p>9 oktas =&gt; None</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>int</strong> – okta value between 0 and 9 (included).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – METAR code</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.wmo.okta2symb">
<span class="sig-prename descclassname"><span class="pre">ampycloud.wmo.</span></span><span class="sig-name descname"><span class="pre">okta2symb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_metsymb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.wmo.okta2symb" title="Permalink to this definition"></a></dt>
<dd><p>Convert an okta value to a LaTeX string, possibly using the metsymb LaTeX package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>int</strong> – okta value between 0 and 9 (included).</p></li>
<li><p><strong>use_metsymb</strong> (<em>bool, optional</em>) – if True, will use the metsymb LaTeX package to draw proper
okta symbols. If False, returns a digit. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – LaTeX command.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The metsymb LaTeX package is available under: <a class="reference external" href="https://github.com/MeteoSwiss/metsymb">https://github.com/MeteoSwiss/metsymb</a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="ampycloud.wmo.alt2code">
<span class="sig-prename descclassname"><span class="pre">ampycloud.wmo.</span></span><span class="sig-name descname"><span class="pre">alt2code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#ampycloud.wmo.alt2code" title="Permalink to this definition"></a></dt>
<dd><p>Function that converts a given altitude in hundreds of ft (3 digit number),
e.g. 5000 ft -&gt; 050, 500 ft -&gt; 005.</p>
<p>Below 10’000 ft, the value is floored to the nearest 100 ft. Above 10’000 ft, the value is
floored to the nearest 1000 ft.</p>
<p>Reference: <em>Aerodrome Reports and Forecasts, A Users’ Handbook to the Codes</em>,
WMO-No.782, 2020 edition. <a class="reference external" href="https://library.wmo.int/?lvl=notice_display&amp;id=716">https://library.wmo.int/?lvl=notice_display&amp;id=716</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>val</strong> (<em>int, float</em>) – the altitude to convert, in feet.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>str</em> – the corresponding METAR code chunk</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../modules.html" class="btn btn-neutral float-left" title="Modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ampycloud.plots.html" class="btn btn-neutral float-right" title="ampycloud.plots package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, MeteoSwiss.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>