<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The ampycloud scientific parameters &mdash; ampycloud  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Troubleshooting" href="troubleshooting.html" />
    <link rel="prev" title="Using ampycloud" href="running.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ampycloud
          </a>
              <div class="version">
                0.6.0.dev0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Using ampycloud</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The ampycloud scientific parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledge.html">Acknowledging ampycloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License &amp; Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss/ampycloud/blob/develop/CONTRIBUTING.md">Contributing</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/MeteoSwiss/ampycloud">Github repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc_todo.html">TODO list</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ampycloud</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The ampycloud scientific parameters</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/parameters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-ampycloud-scientific-parameters">
<span id="parameters"></span><h1>The ampycloud scientific parameters<a class="headerlink" href="#the-ampycloud-scientific-parameters" title="Link to this heading">ÔÉÅ</a></h1>
<p>The default values of all the ampycloud parameters with a <strong>scientific</strong> impact on the outcome of
the algorithm are defined in <code class="docutils literal notranslate"><span class="pre">src/ampycloud/prms/ampycloud_default_prms.yml</span></code>. For completeness
and ease of access, the content of this file is reproduced below.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With ampycloud installed on your machine, you can easily get a local copy of this file using
the following high-level entry point accessible from the command line: <code class="docutils literal notranslate"><span class="pre">ampycloud_copy_prm_file</span></code>.
For more details, see
<a class="reference internal" href="running.html#adjusting-the-default-algorithm-parameters"><span class="std std-ref">Adjusting the default algorithm parameters.</span></a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is <strong>very strongly</strong> discouraged to modify this reference file directly. ampycloud offers
other ways to modify the default parameter values to fit your needs, including via local
copies of this file. See <a class="reference internal" href="running.html#adjusting-the-default-algorithm-parameters"><span class="std std-ref">Adjusting the default algorithm parameters</span></a>
for details.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># Copyright (c) 2021-2022 MeteoSwiss, contributors listed in AUTHORS.</span>
<span class="c1">#</span>
<span class="c1"># Distributed under the terms of the 3-Clause BSD License.</span>
<span class="c1">#</span>
<span class="c1"># SPDX-License-Identifier: BSD-3-Clause</span>
<span class="c1">#</span>
<span class="c1"># File contains: default scientific parameters of the ampycloud algorithm</span>
<span class="c1">#</span>

<span class="c1"># General parameters</span>

<span class="c1"># Plotting style. Can be one of &#39;base&#39;, &#39;latex&#39;, &#39;metsymb&#39;</span>
<span class="nt">MPL_STYLE</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;base&#39;</span>

<span class="c1"># Minimum Sector Altitude, in ft. No cloud layers with a base above this value will be reported</span>
<span class="c1"># in the ampycloud METAR messages. Set it to null for no limit.</span>
<span class="nt">MSA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="c1"># Additional distance above the MSA value (in ft) beyond which hits will be ignored (=cropped) by</span>
<span class="c1"># ampycloud. This is to ensure that cloud layers with cloud base heights close to the MSA value are</span>
<span class="c1"># still detected with the correct densities.</span>
<span class="nt">MSA_HIT_BUFFER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1500</span>

<span class="c1"># Max number of hits in a layer to still consider it to be of 0 oktas.</span>
<span class="nt">MAX_HITS_OKTA0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="c1"># Max number of holes (=non-detection of cloud) in a layer to still consider it to be of 8 oktas.</span>
<span class="nt">MAX_HOLES_OKTA8</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>

<span class="c1"># Number (in %) of the cloud hit heights (sorted from smallest to highest) to ignore when</span>
<span class="c1"># computing the cloud altitude base, taken to be the min altitude of the</span>
<span class="c1"># 100-LAYER_BASE_LVL_PERC % remaining points.</span>
<span class="nt">BASE_LVL_ALT_PERC</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>

<span class="c1"># Number of Slice/Group/Layer points (in %) - starting from the most recent ones -</span>
<span class="c1"># to use to compute the cloud base altitude. 30 would use only the 30% youngest hits.</span>
<span class="c1"># Set to 100 to use all the points.</span>
<span class="nt">BASE_LVL_LOOKBACK_PERC</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>

<span class="c1"># LOWESS parameters used to fit Slice/Groups/Layers altitude trends</span>
<span class="nt">LOWESS</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Fraction of the slice/group/layer points to consider when deriving the LOWESS smooth fit.</span>
<span class="w">    </span><span class="c1"># Values too small will result in overfitting. Values too large will miss rapid</span>
<span class="w">    </span><span class="c1"># altitude fluctuations.</span>
<span class="w">    </span><span class="nt">frac</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.35</span>
<span class="w">    </span><span class="c1"># Number of LOWESS fitting iterations</span>
<span class="w">    </span><span class="nt">it</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="c1"># Slicing parameters</span>
<span class="nt">SLICING_PRMS</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Clustering distance threshold</span>
<span class="w">    </span><span class="nt">distance_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">    </span><span class="c1"># Time scaling factor</span>
<span class="w">    </span><span class="nt">dt_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<span class="w">    </span><span class="c1"># Altitude scaling mode</span>
<span class="w">    </span><span class="nt">alt_scale_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minmax-scale</span>
<span class="w">    </span><span class="c1"># Altitude scaling parameters (in ft)</span>
<span class="w">    </span><span class="nt">alt_scale_kwargs</span><span class="p">:</span>
<span class="w">        </span><span class="nt">min_range</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>

<span class="c1"># Clustering parameters</span>
<span class="nt">GROUPING_PRMS</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Padding (in % of the slice altitude range) to add above and below slices</span>
<span class="w">    </span><span class="c1"># before looking for overlaps</span>
<span class="w">    </span><span class="nt">alt_pad_perc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">+10</span>
<span class="w">    </span><span class="c1"># Time scaling factor (in s)</span>
<span class="w">    </span><span class="nt">dt_scale</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">180</span>
<span class="w">    </span><span class="c1"># Boost factor, applied to the slice fluffiness to derive the altitude scaling factor</span>
<span class="w">    </span><span class="nt">fluffiness_boost</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="c1"># Range of allowed altitude scaling factor (in ft). The fluffiness_boost will never be allowed</span>
<span class="w">    </span><span class="c1"># to push the alt_scaling beyond this range.</span>
<span class="w">    </span><span class="nt">alt_scale_range</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">500</span><span class="p p-Indicator">]</span>

<span class="c1"># Layering parameters</span>
<span class="nt">LAYERING_PRMS</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Minimum okta value below which cluster splitting is not attempted</span>
<span class="w">    </span><span class="nt">min_okta_to_split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="c1"># Minimum separation (in ft) between the mean altitude of identified layers inside groups</span>
<span class="w">    </span><span class="c1"># with a base altitude in the bins set by min_sep_lims. Any layers separated by less than this</span>
<span class="w">    </span><span class="c1"># value will not be split. Any value &lt; than 5 times the vertical resolution of the data will</span>
<span class="w">    </span><span class="c1"># raise a warning, as it may lead to an over-layering of groups. For the ampycloud METAR</span>
<span class="w">    </span><span class="c1"># messages to be consistent with the ICAO rules of layer selection, this should be &gt;=100 ft</span>
<span class="w">    </span><span class="c1"># below 10&#39;000 ft.</span>
<span class="w">    </span><span class="nt">min_sep_vals</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">250</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1000</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="c1"># Altitude threshold (in ft) separating the min_sep_val elements.</span>
<span class="w">    </span><span class="c1"># The 0 and + infty extrema will be automatically added to the list by ampycloud.</span>
<span class="w">    </span><span class="c1"># Just list here the intermediate steps.</span>
<span class="w">    </span><span class="nt">min_sep_lims</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">10000</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">gmm_kwargs</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Whether to use &#39;BIC&#39; or &#39;AIC&#39; scores to decide which model is &quot;best&quot;.</span>
<span class="w">        </span><span class="nt">scores</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BIC</span>
<span class="w">        </span><span class="c1"># Whether to use &#39;delta&#39;, or &#39;prob&#39; to find the best model.</span>
<span class="w">        </span><span class="c1"># See ampycloud.layer.best_gmm() for details.</span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">delta</span>
<span class="w">        </span><span class="c1"># Minimum model probability computed from the relative likelihood,</span>
<span class="w">        </span><span class="c1"># below which alternative models with more components will be considered.</span>
<span class="w">        </span><span class="c1"># Only used if mode=&#39;prob&#39;</span>
<span class="w">        </span><span class="nt">min_prob</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="c1"># A model with a smaller score will only be considered &quot;valid&quot;</span>
<span class="w">        </span><span class="c1"># if its score is smaller than delta_mul_gain*current_best_score.</span>
<span class="w">        </span><span class="c1"># Only used if mode=&#39;delta&#39;</span>
<span class="w">        </span><span class="nt">delta_mul_gain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.95</span>
<span class="w">        </span><span class="c1"># If set, rescale each group between 0 and this value before looking for layers using gmm.</span>
<span class="w">        </span><span class="nt">rescale_0_to_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="running.html" class="btn btn-neutral float-left" title="Using ampycloud" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2023, MeteoSwiss.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>